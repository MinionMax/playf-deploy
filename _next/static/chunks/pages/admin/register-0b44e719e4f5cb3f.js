(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{9552:function(e){var r=e.exports=function(e){e||(e={}),"string"===typeof e&&(e={cookie:e}),void 0===e.cookie&&(e.cookie="");var r={get:function(r){for(var t=e.cookie.split(/;\s*/),n=0;n<t.length;n++){var u=t[n].split("=");if(unescape(u[0])===r)return unescape(u[1])}},set:function(r,t,n){n||(n={});var u=escape(r)+"="+escape(t);return n.expires&&(u+="; expires="+n.expires),n.path&&(u+="; path="+escape(n.path)),n.domain&&(u+="; domain="+escape(n.domain)),n.secure&&(u+="; secure"),e.cookie=u,u}};return r};if("undefined"!==typeof document){var t=r(document);r.get=t.get,r.set=t.set}},5550:function(e,r,t){"use strict";t.d(r,{Z:function(){return h}});var n=t(266),u=t(809),a=t.n(u),s=t(2454),o=t.n(s),c=t(6942),i=t(1163),p=(t(7294),t(9552)),f=t.n(p);var l=t(5893),h=function(e){var r="register"===e.type,t=(0,i.useRouter)();return(0,l.jsxs)("div",{className:o().formContainer,children:[(0,l.jsxs)("h1",{className:o().formHeader,children:["Enter creds to ",e.type," \ud83d\udc64"]}),(0,l.jsxs)("form",{onSubmit:function(){var e=(0,n.Z)(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,(0,c.HR)(r);case 3:if(!e.sent){e.next=7;break}return window.onbeforeunload=function(){var e=(0,n.Z)(a().mark((function e(r){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!(t=f().get("auth_token"))){e.next=5;break}return e.next=5,(0,c.TX)(t);case 5:return e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e.abrupt("return",t.push("/admin"));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),name:e.type,className:o().form,children:[r?(0,l.jsx)("input",{name:"email",type:"text",placeholder:"e-mail",className:o().input}):null,(0,l.jsx)("input",{name:"username",type:"text",placeholder:"username",className:o().input}),(0,l.jsx)("input",{name:"password",type:"password",placeholder:"password",className:o().input}),(0,l.jsx)("button",{type:"submit",className:o().submit,children:e.type})]})]})}},8004:function(e,r,t){"use strict";t.r(r);var n=t(5550),u=t(5893);r.default=function(){return(0,u.jsx)("div",{children:(0,u.jsx)(n.Z,{type:"register"})})}},6942:function(e,r,t){"use strict";t.d(r,{HR:function(){return i},TX:function(){return d},uL:function(){return x}});var n=t(266),u=t(809),a=t.n(u),s=t(9552),o=t.n(s),c="https://playf-api-production.up.railway.app";function i(e){return p.apply(this,arguments)}function p(){return(p=(0,n.Z)(a().mark((function e(r){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("register"!==r.currentTarget.name){e.next=7;break}return e.next=3,f(r);case 3:return t=e.sent,e.abrupt("return",!!t);case 7:return e.next=9,h(r);case 9:return n=e.sent,e.abrupt("return",!!n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return l.apply(this,arguments)}function l(){return(l=(0,n.Z)(a().mark((function e(r){var t,n,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={email:r.currentTarget.email.value,username:r.currentTarget.username.value,password:r.currentTarget.password.value},e.prev=1,e.next=4,fetch(c+"/users/register",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"});case 4:return n=e.sent,e.next=7,n.json();case 7:return u=e.sent,s=u.authToken.token,o().set("auth_token",s,{sameSite:!0,path:"/"}),e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=(0,n.Z)(a().mark((function e(r){var t,n,u,s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={username:r.currentTarget.username.value,password:r.currentTarget.password.value},e.prev=1,!(n=o().get("auth_token"))){e.next=6;break}return e.next=6,d(n);case 6:return e.next=8,fetch(c+"/users/login",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"});case 8:return u=e.sent,e.next=11,u.json();case 11:return s=e.sent,i=s.authToken.token,o().set("auth_token",i,{sameSite:!0,path:"/"}),e.abrupt("return",!0);case 17:return e.prev=17,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}function d(e){return v.apply(this,arguments)}function v(){return(v=(0,n.Z)(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,fetch(c+"/users/logout/"+r,{method:"DELETE"});case 5:e.sent,o().set("auth_token","",{sameSite:!0,path:"/"}),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",console.error(e.t0));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function x(){return k.apply(this,arguments)}function k(){return(k=(0,n.Z)(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o().get("auth_token")){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,fetch(c+"/users/auth/"+r);case 6:if(200!==e.sent.status){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}},5296:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/register",function(){return t(8004)}])},2454:function(e){e.exports={formContainer:"userForm_formContainer__zGmNe",formHeader:"userForm_formHeader__fUNH5",form:"userForm_form__erxrC",input:"userForm_input__FQNUU",submit:"userForm_submit__r4LCd"}},266:function(e,r,t){"use strict";function n(e,r,t,n,u,a,s){try{var o=e[a](s),c=o.value}catch(i){return void t(i)}o.done?r(c):Promise.resolve(c).then(n,u)}function u(e){return function(){var r=this,t=arguments;return new Promise((function(u,a){var s=e.apply(r,t);function o(e){n(s,u,a,o,c,"next",e)}function c(e){n(s,u,a,o,c,"throw",e)}o(void 0)}))}}t.d(r,{Z:function(){return u}})}},function(e){e.O(0,[774,888,179],(function(){return r=5296,e(e.s=r);var r}));var r=e.O();_N_E=r}]);