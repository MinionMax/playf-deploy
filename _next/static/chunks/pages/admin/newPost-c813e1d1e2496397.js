(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[799],{9552:function(e){var t=e.exports=function(e){e||(e={}),"string"===typeof e&&(e={cookie:e}),void 0===e.cookie&&(e.cookie="");var t={get:function(t){for(var n=e.cookie.split(/;\s*/),r=0;r<n.length;r++){var a=n[r].split("=");if(unescape(a[0])===t)return unescape(a[1])}},set:function(t,n,r){r||(r={});var a=escape(t)+"="+escape(n);return r.expires&&(a+="; expires="+r.expires),r.path&&(a+="; path="+escape(r.path)),r.domain&&(a+="; domain="+escape(r.domain)),r.secure&&(a+="; secure"),e.cookie=a,a}};return t};if("undefined"!==typeof document){var n=t(document);t.get=n.get,t.set=n.set}},8705:function(e,t,n){"use strict";n.r(t);var r=n(266),a=n(809),u=n.n(a),s=n(2097),o=n.n(s),c=n(1163),i=n(6942),p=n(7294),f=n(6969),l=n(5893);t.default=function(){var e=(0,c.useRouter)(),t=function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.uL)();case 2:t.sent||e.push("/admin/login");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,p.useEffect)((function(){t()}));var n="((http|https)://)(www.)?[a-zA-Z0-9@:%._\\+~#?&//=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%._\\+~#?&//=]*)";return(0,l.jsxs)("div",{className:o().container,children:[(0,l.jsx)("h1",{className:o().header,children:"Submit a new post \ud83c\udf89"}),(0,l.jsxs)("form",{className:o().form,onSubmit:function(){var t=(0,r.Z)(u().mark((function t(n){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.zp)(n);case 2:r=t.sent,e.push("/library/"+r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[(0,l.jsx)("input",{type:"text",name:"title",placeholder:"title",className:o().input,required:!0}),(0,l.jsx)("input",{type:"text",name:"composer",placeholder:"composer",className:o().input,required:!0}),(0,l.jsx)("input",{type:"date",name:"date",placeholder:"published on",className:o().input}),(0,l.jsx)("textarea",{name:"description",placeholder:"description",className:"".concat(o().input," ").concat(o().description),required:!0}),(0,l.jsx)("input",{type:"text",name:"videoLink",pattern:n,placeholder:"link to video",className:o().input,required:!0}),(0,l.jsx)("input",{type:"text",name:"fileLink",pattern:n,placeholder:"link to PDF in Google Drive",className:o().input,required:!0}),(0,l.jsx)("button",{type:"submit",className:o().submit,children:"submit"})]})]})}},6969:function(e,t,n){"use strict";n.d(t,{zp:function(){return p},tI:function(){return d},Bd:function(){return v},Q5:function(){return y},Lh:function(){return b},qk:function(){return _}});var r=n(266),a=n(809),u=n.n(a),s=n(6942),o=n(9552),c=n.n(o),i="https://playf-api-production.up.railway.app";function p(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(u().mark((function e(t){var n,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=Array.from(t.currentTarget.childNodes),r={title:"",composer:"",date:"",description:"",videoLink:"",fileLink:"",token:""},n.forEach((function(e){""!==e.name&&(r[e.name]=e.value)})),a=c().get("auth_token"),r.token=a,e.next=8,l(r);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.uL)();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,fetch(i+"/posts/new",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"});case 8:return n=e.sent,e.next=11,n.json();case 11:return r=e.sent,e.abrupt("return",r.id);case 15:e.prev=15,e.t0=e.catch(5),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}function d(){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c().get("auth_token"),e.next=3,(0,s.uL)();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,fetch(i+"/posts/sync",{body:JSON.stringify({token:t}),headers:{"Content-Type":"application/json"},method:"POST"});case 9:return n=e.sent,e.next=12,n.json();case 12:return r=e.sent,e.abrupt("return",r);case 16:e.prev=16,e.t0=e.catch(6),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}function v(){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(i+"/posts");case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function y(e){return k.apply(this,arguments)}function k(){return(k=(0,r.Z)(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,fetch(i+"/posts/byPK/"+t);case 5:return n=e.sent,e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r);case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function b(e,t,n){return w.apply(this,arguments)}function w(){return(w=(0,r.Z)(u().mark((function e(t,n,r){var a,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r&&(a={amount:t,composer:r,not:n}),r||(a={amount:t}),e.next=5,fetch(i+"/posts/suggest",{body:JSON.stringify(a),headers:{"Content-Type":"application/json"},method:"POST"});case 5:return s=e.sent,e.next=8,s.json();case 8:return o=e.sent,e.abrupt("return",o);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function _(e,t){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)(u().mark((function e(t,n){var r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c().get("auth_token"),a=n.target[0].value,s={id:t,onlyFile:!0,fileLink:a,token:r},e.prev=3,e.next=6,fetch(i+"/posts/edit",{body:JSON.stringify(s),headers:{"Content-Type":"application/json"},method:"PUT"});case 6:e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}},6942:function(e,t,n){"use strict";n.d(t,{HR:function(){return i},TX:function(){return m},uL:function(){return x}});var r=n(266),a=n(809),u=n.n(a),s=n(9552),o=n.n(s),c="https://playf-api-production.up.railway.app";function i(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(u().mark((function e(t){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("register"!==t.currentTarget.name){e.next=7;break}return e.next=3,f(t);case 3:return n=e.sent,e.abrupt("return",!!n);case 7:return e.next=9,h(t);case 9:return r=e.sent,e.abrupt("return",!!r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(u().mark((function e(t){var n,r,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={email:t.currentTarget.email.value,username:t.currentTarget.username.value,password:t.currentTarget.password.value},e.prev=1,e.next=4,fetch(c+"/users/register",{body:JSON.stringify(n),headers:{"Content-Type":"application/json"},method:"POST"});case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,s=a.authToken.token,o().set("auth_token",s,{sameSite:!0,path:"/"}),e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function h(e){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(u().mark((function e(t){var n,r,a,s,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={username:t.currentTarget.username.value,password:t.currentTarget.password.value},e.prev=1,!(r=o().get("auth_token"))){e.next=6;break}return e.next=6,m(r);case 6:return e.next=8,fetch(c+"/users/login",{body:JSON.stringify(n),headers:{"Content-Type":"application/json"},method:"POST"});case 8:return a=e.sent,e.next=11,a.json();case 11:return s=e.sent,i=s.authToken.token,o().set("auth_token",i,{sameSite:!0,path:"/"}),e.abrupt("return",!0);case 17:return e.prev=17,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,fetch(c+"/users/logout/"+t,{method:"DELETE"});case 5:e.sent,o().set("auth_token","",{sameSite:!0,path:"/"}),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",console.error(e.t0));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function x(){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o().get("auth_token")){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,fetch(c+"/users/auth/"+t);case 6:if(200!==e.sent.status){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}},5449:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/newPost",function(){return n(8705)}])},2097:function(e){e.exports={container:"postForm_container__WmJL0",header:"postForm_header__i4iR2",form:"postForm_form__Fpxuh",input:"postForm_input__6_wxG",description:"postForm_description__RA9SN",submit:"postForm_submit__46kBI"}},266:function(e,t,n){"use strict";function r(e,t,n,r,a,u,s){try{var o=e[u](s),c=o.value}catch(i){return void n(i)}o.done?t(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,u){var s=e.apply(t,n);function o(e){r(s,a,u,o,c,"next",e)}function c(e){r(s,a,u,o,c,"throw",e)}o(void 0)}))}}n.d(t,{Z:function(){return a}})}},function(e){e.O(0,[774,888,179],(function(){return t=5449,e(e.s=t);var t}));var t=e.O();_N_E=t}]);